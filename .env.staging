# ======================================================================
# GovWin IQ Chatbot - Staging Environment Configuration
# Railway-specific deployment variables
# ======================================================================
# This file contains staging environment variables for Railway deployment
# Copy to Railway environment variables in the dashboard
# DO NOT commit this file with actual secrets - use placeholder values
# ======================================================================

# ----------------------------------------------------------------------
# Environment Identification
# ----------------------------------------------------------------------
NODE_ENV=staging
RAILWAY_ENVIRONMENT=staging
BUILD_ENV=staging

# Environment metadata
STAGING_VERSION=1.0.0-staging
DEPLOYMENT_ENVIRONMENT=railway-staging
SERVICE_NAME=govwin-iq-chatbot-staging

# ----------------------------------------------------------------------
# Server Configuration
# ----------------------------------------------------------------------
# Railway automatically provides PORT - use fallback for local testing
PORT=${PORT:-3002}
STAGING_PORT=3002

# Railway provides automatic hostname and URLs
HOST=0.0.0.0
RAILWAY_STATIC_URL=${RAILWAY_STATIC_URL:-https://govwin-iq-chatbot-staging.up.railway.app}
RAILWAY_PUBLIC_DOMAIN=${RAILWAY_PUBLIC_DOMAIN:-govwin-iq-chatbot-staging.up.railway.app}

# Base URL construction for API calls
BASE_URL=${RAILWAY_STATIC_URL:-http://localhost:3002}
API_BASE_URL=${BASE_URL}/api/v1

# ----------------------------------------------------------------------
# Railway-Specific Configuration
# ----------------------------------------------------------------------
# Railway deployment settings
RAILWAY_DEPLOYMENT_ID=${RAILWAY_DEPLOYMENT_ID:-local-dev}
RAILWAY_SERVICE_ID=${RAILWAY_SERVICE_ID:-local}
RAILWAY_PROJECT_ID=${RAILWAY_PROJECT_ID:-local}
RAILWAY_ENVIRONMENT_ID=${RAILWAY_ENVIRONMENT_ID:-local}

# Railway networking
RAILWAY_TCP_PROXY_PORT=${RAILWAY_TCP_PROXY_PORT:-}
RAILWAY_TCP_APPLICATION_PORT=${PORT:-3002}

# Build and deployment info
RAILWAY_GIT_COMMIT_SHA=${RAILWAY_GIT_COMMIT_SHA:-unknown}
RAILWAY_GIT_BRANCH=${RAILWAY_GIT_BRANCH:-main}
RAILWAY_GIT_REPO_NAME=${RAILWAY_GIT_REPO_NAME:-govwin-iq-chatbot}
RAILWAY_GIT_REPO_OWNER=${RAILWAY_GIT_REPO_OWNER:-}

# ----------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------
# Vector Database Settings
VECTOR_STORE_PATH=/app/data/staging/govwin-faq-vectors.json
VECTOR_STORE_BACKUP_PATH=/app/backups/staging
VECTOR_DIMENSION=200
MAX_VECTORS=10000
AUTO_SAVE=true
SAVE_INTERVAL=300000

# Knowledge Base Configuration
KNOWLEDGE_BASE_PATH=/app/knowledge-base/govwin-iq-knowledge-base.md
FAQ_CACHE_PATH=/app/cache/staging/faq-cache.json
FAQ_CACHE_TTL=1800000
FAQ_RELOAD_INTERVAL=600000

# Session Storage (Railway ephemeral filesystem)
SESSION_STORAGE=memory
SESSION_TTL=7200000
MAX_SESSIONS=1000
SESSION_CLEANUP_INTERVAL=600000

# ----------------------------------------------------------------------
# External API Configuration
# ----------------------------------------------------------------------
# GovWin IQ API Integration (Staging endpoints)
GOVWIN_API_BASE_URL=https://api-staging.govwin.com
GOVWIN_API_KEY=staging_api_key_placeholder_replace_with_actual
GOVWIN_API_TIMEOUT=30000
GOVWIN_API_RETRIES=3
GOVWIN_API_RETRY_DELAY=1000

# API Authentication
GOVWIN_CLIENT_ID=staging_client_id_placeholder
GOVWIN_CLIENT_SECRET=staging_client_secret_placeholder
GOVWIN_AUTH_SCOPE=read:opportunities,read:markets,read:contracts

# Federal Data APIs
FEDERAL_API_BASE_URL=https://api.sam.gov/data-services/v1
FEDERAL_API_KEY=federal_api_key_placeholder
SAM_GOV_API_KEY=sam_gov_api_key_placeholder

# SLED Market Data APIs
SLED_API_BASE_URL=https://api-staging.sledmarkets.com
SLED_API_KEY=sled_api_key_placeholder

# ----------------------------------------------------------------------
# Logging Configuration
# ----------------------------------------------------------------------
# Log levels: error, warn, info, debug
LOG_LEVEL=info
LOG_FORMAT=json
ENABLE_REQUEST_LOGGING=true
ENABLE_PERFORMANCE_LOGGING=true

# Railway log aggregation
RAILWAY_LOGS_ENABLED=true
STRUCTURED_LOGGING=true
LOG_TIMESTAMP_FORMAT=iso

# Application-specific logging
ENABLE_AGENT_LOGGING=true
ENABLE_RAG_LOGGING=true
ENABLE_CONTEXT_LOGGING=true
ENABLE_ROUTING_LOGGING=true

# Performance monitoring
SLOW_QUERY_THRESHOLD=1000
SLOW_AGENT_THRESHOLD=2000
MEMORY_MONITORING=true
ENABLE_PERFORMANCE_METRICS=true

# ----------------------------------------------------------------------
# Security Configuration
# ----------------------------------------------------------------------
# API Security
API_RATE_LIMIT_WINDOW=900000
API_RATE_LIMIT_MAX=1000
ENABLE_RATE_LIMITING=true

# CORS Configuration
CORS_ORIGIN_STAGING=https://staging.govwin.com,https://staging-iq.govwin.com,https://govwin-iq-chatbot-staging.up.railway.app
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# Request validation
MAX_REQUEST_SIZE=10mb
ENABLE_INPUT_SANITIZATION=true
STRICT_JSON_PARSING=true

# Security headers
ENABLE_HELMET=true
ENABLE_COMPRESSION=true
TRUST_PROXY=true

# ----------------------------------------------------------------------
# Agent System Configuration
# ----------------------------------------------------------------------
# Agent Registry
ENABLE_AGENT_REGISTRY=true
MAX_CONCURRENT_AGENTS=10
AGENT_TIMEOUT=8000
AGENT_CACHE_ENABLED=true
AGENT_CACHE_TTL=900000

# Intent Router
INTENT_CONFIDENCE_THRESHOLD=0.25
ENABLE_MULTI_AGENT_ROUTING=true
MAX_ROUTING_TIME=2000
FALLBACK_AGENT=conversationManager

# Context Manager
CONTEXT_SESSION_TIMEOUT=3600000
MAX_CONTEXT_SIZE=1000000
CONTEXT_PERSISTENCE_ENABLED=true
CONTEXT_CLEANUP_INTERVAL=1800000

# Response Coordinator
MAX_RESPONSE_TIME=10000
CONFLICT_RESOLUTION_STRATEGY=priority_based
AGGREGATION_STRATEGY=weighted_average
MAX_SOURCES_PER_RESPONSE=5

# Agent-specific settings
FEDERAL_AGENT_ENABLED=true
FEDERAL_AGENT_CACHE_TTL=900000
SLED_AGENT_ENABLED=true
SLED_AGENT_CACHE_TTL=900000
SEARCH_ORCHESTRATOR_TIMEOUT=10000
ALERT_MANAGER_ENABLED=true
REPORT_GENERATOR_TIMEOUT=15000

# ----------------------------------------------------------------------
# Cache Configuration
# ----------------------------------------------------------------------
# Redis configuration (if using Railway Redis addon)
REDIS_URL=${REDIS_URL:-}
REDIS_HOST=${REDIS_HOST:-}
REDIS_PORT=${REDIS_PORT:-6379}
REDIS_PASSWORD=${REDIS_PASSWORD:-}
REDIS_TLS_ENABLED=true

# Memory cache fallback
MEMORY_CACHE_ENABLED=true
MEMORY_CACHE_MAX_SIZE=100
MEMORY_CACHE_TTL=600000

# Response caching
ENABLE_RESPONSE_CACHE=true
RESPONSE_CACHE_TTL=900000
RAG_CACHE_TTL=1800000
AGENT_RESPONSE_CACHE_TTL=600000

# ----------------------------------------------------------------------
# Monitoring and Analytics
# ----------------------------------------------------------------------
# Health checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# Metrics collection
ENABLE_METRICS=true
METRICS_INTERVAL=60000
SYSTEM_METRICS_ENABLED=true
APPLICATION_METRICS_ENABLED=true

# Performance monitoring
ENABLE_APM=false
APM_SERVICE_NAME=govwin-iq-chatbot-staging
APM_ENVIRONMENT=staging

# Error tracking (Sentry configuration)
SENTRY_DSN=sentry_dsn_placeholder_staging
SENTRY_ENVIRONMENT=staging
SENTRY_TRACES_SAMPLE_RATE=0.1

# Analytics
ANALYTICS_ENABLED=true
ANALYTICS_PROVIDER=internal
TRACKING_ID=staging_tracking_id_placeholder
ANALYTICS_SAMPLE_RATE=1.0

# ----------------------------------------------------------------------
# Notification Configuration
# ----------------------------------------------------------------------
# Webhook notifications
WEBHOOK_URL=webhook_url_placeholder
WEBHOOK_SECRET=webhook_secret_placeholder
ENABLE_WEBHOOKS=true

# Email notifications
SMTP_HOST=smtp.railway.app
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=smtp_user_placeholder
SMTP_PASS=smtp_password_placeholder

# Alert recipients
ALERT_EMAIL_RECIPIENTS=alerts@yourcompany.com,devops@yourcompany.com
ALERT_WEBHOOK_URL=https://hooks.slack.com/services/your/slack/webhook

# Notification channels
ENABLE_EMAIL_ALERTS=true
ENABLE_SLACK_NOTIFICATIONS=false
ENABLE_WEBHOOK_NOTIFICATIONS=true

# ----------------------------------------------------------------------
# Feature Flags
# ----------------------------------------------------------------------
# Agent features
ENABLE_FEDERAL_AGENT=true
ENABLE_SLED_AGENT=true
ENABLE_REGIONAL_MARKETS_AGENT=true
ENABLE_SEARCH_ORCHESTRATOR=true
ENABLE_ALERT_MANAGER=true
ENABLE_REPORT_GENERATOR=true

# System features
ENABLE_RAG_SYSTEM=true
ENABLE_VECTOR_SEARCH=true
ENABLE_CONTEXT_MANAGEMENT=true
ENABLE_RESPONSE_COORDINATION=true

# Development features
ENABLE_DEBUG_ROUTES=false
ENABLE_MOCK_DATA=false
ENABLE_HOT_RELOAD=false
VERBOSE_LOGGING=false

# Experimental features
ENABLE_EXPERIMENTAL_FEATURES=false
ENABLE_AI_ENHANCED_ROUTING=false
ENABLE_PREDICTIVE_CACHING=false

# ----------------------------------------------------------------------
# Railway Deployment Configuration
# ----------------------------------------------------------------------
# Build configuration
NODE_VERSION=18
NPM_VERSION=latest
BUILD_COMMAND=npm run build:staging
START_COMMAND=node server/simple-server.js

# Resource limits
RAILWAY_MEMORY_LIMIT=1024
RAILWAY_CPU_LIMIT=1000
RAILWAY_DISK_LIMIT=1024

# Auto-scaling (Railway Pro)
RAILWAY_AUTOSCALE_MIN_REPLICAS=1
RAILWAY_AUTOSCALE_MAX_REPLICAS=3
RAILWAY_AUTOSCALE_TARGET_CPU=70

# Deployment settings
RAILWAY_DEPLOYMENT_TIMEOUT=600
RAILWAY_HEALTHCHECK_PATH=/api/v1/system/health
RAILWAY_HEALTHCHECK_TIMEOUT=30

# Environment promotion
PROMOTE_TO_PRODUCTION=false
REQUIRE_APPROVAL=true
AUTO_DEPLOY=true

# ----------------------------------------------------------------------
# Backup and Recovery
# ----------------------------------------------------------------------
# Backup configuration
BACKUP_ENABLED=true
BACKUP_INTERVAL=3600000
MAX_BACKUPS=24
BACKUP_COMPRESSION=true

# Recovery settings
AUTO_RECOVERY_ENABLED=true
RECOVERY_TIMEOUT=300000
ROLLBACK_ON_FAILURE=true

# Data persistence (Railway volumes)
RAILWAY_VOLUME_MOUNT_PATH=/app/data
VECTOR_DATA_PATH=/app/data/vectors
BACKUP_DATA_PATH=/app/data/backups
LOGS_DATA_PATH=/app/data/logs

# ----------------------------------------------------------------------
# Development and Testing
# ----------------------------------------------------------------------
# Test configuration
TEST_MODE=false
MOCK_EXTERNAL_APIS=false
SEED_TEST_DATA=false
ENABLE_TEST_ROUTES=false

# Debug configuration
DEBUG_ENABLED=false
DEBUG_NAMESPACE=govwin:*
PROFILING_ENABLED=false
MEMORY_PROFILING=false

# Development tools
ENABLE_SWAGGER_DOCS=true
SWAGGER_BASE_URL=${BASE_URL}
API_DOCS_ENABLED=true
PLAYGROUND_ENABLED=false

# ----------------------------------------------------------------------
# Maintenance and Operations
# ----------------------------------------------------------------------
# Maintenance mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="System is currently under maintenance"
MAINTENANCE_BYPASS_KEY=maintenance_bypass_key_placeholder

# Operational settings
GRACEFUL_SHUTDOWN_TIMEOUT=10000
KEEP_ALIVE_TIMEOUT=65000
HEADERS_TIMEOUT=66000
MAX_HEADER_SIZE=16384

# Cleanup and optimization
AUTO_CLEANUP_ENABLED=true
CLEANUP_INTERVAL=3600000
OPTIMIZE_MEMORY=true
GC_INTERVAL=300000